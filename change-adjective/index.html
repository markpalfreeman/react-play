<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Change Adjective</title>
  <script src="http://fb.me/react-0.8.0.js"></script>
  <script src="http://fb.me/JSXTransformer-0.8.0.js"></script>
  <link rel="stylesheet" href="style.css">

</head>
<body>

  <script type="text/jsx">
    /** @jsx React.DOM */

    (function() {

      var words = [
        'cool', 'lame', 'whatever', 'React', 'nothing', 'pointless', 'WTF', 'bitchin\''
      ];

      var loc = Math.round(Math.random() * (words.length - 1));

      var App = React.createClass({

        // Properties should be used for static data
        // Use STATE for things that will change
        getInitialState: function() {
          return {
            word: words[3]
          }
        },

        // function for changing adjective
        changeAdj: function() {
          if (loc === (words.length - 1)) {
            loc = 0;
          } else {
            loc++;
          }

          this.setState({word: words[loc]});

        },

        // Take a word from a user
        addWord: function() {

          var wordInput = document.querySelector('#newword');

          if (wordInput.value) {
            var newWord = wordInput.value;
            words.push(newWord);
          } else {
            alert('Enter a word to add it!')
          }

          this.setState();

          wordInput.value = '';

        },

        deleteWord: function(item) {

          console.log('enter delete function');

          this.props.list.splice(this.props.list.indexOf(item), 1);
          this.setState();

        },


        // "render" function to fill in virtual DOM
        render: function() {
          return (
            <main>
              <PageTitle adjective={this.state.word} change={this.changeAdj} />

              <br />
              <hr />
              <br />

              <input id="newword" className='type' type="text" placeholder='"ridiculous"' />
              <button id="addword" className='add' onClick={this.addWord}>
                Add word</button>


              <h4>Available words:</h4>
              <List list={this.props.words} delete={this.deleteWord}/>
            </main>
          )
        }

      });

      var PageTitle = React.createClass({
        render: function() {
          return (
            <header>
              <h1>My
                <mark className="adjective">{this.props.adjective}</mark>
                page!
              </h1>
              <button onClick={this.props.change} className="change">Change</button>
            </header>
          )
        }
      });

      var List = React.createClass({

        render: function() {
          var that = this;

          return (
            <ul className='word-list'>
              {this.props.list.map(function(item) {
                return (
                  <li>{item}
                    <a onClick={that.props.delete.bind(null, item)} href='' className='delete-word' >x</a>
                  </li>
                )
              })}
            </ul>
          )
        }
      });

      // Render the App
      React.renderComponent(<App words={words} />, document.body)

    })();

  </script>
</body>
</html>
